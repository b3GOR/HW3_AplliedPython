## Описание API

Данный сервис призван сокращать ссылки.


## Примеры запросов



## Инструкция по запуску

Клонируйте репозиторий к себе на ПК
```sh
git clone https://github.com/b3GOR/HW3_AplliedPython.git
```
### Запуск через через docker-контейнер
Зайдите в терминал, в папке проекта и запустите следующую команду

```sh
docker -t build
```

API  работает по адресу http://127.0.0.1:8000/docs

### Запуск через main.py

Поставьте виртуальное окружение и активируйте его

```sh
python -m venv .venv
```

* Также установите PostgreSQL и Redis

Скачайте необходимые зависимости 

```sh
pip install -r requirements.txt
```

Запустите веб-сервер с API введя в терминал
```sh
uvicorn main:app --reload
```
API  работает по адресу http://127.0.0.1:8000/docs

## Описание БД
База данный состоит из **PostgreSQL** (для основного хранения) и **Redis** (кэширование наиболее часто используемых ссылок, для более быстрого доступа к ним) 

###  PostgreSQL

Взаимодействие с БД происходить через **SQLAlchemy** при помощи **psycopg2**.
Всего в БД 3 таблицы:

* **links** - здесь храняться ссылки и их укороченная версия
    * *short_code* - укороченная часть ссылки
    * *original_url* - оригинальная ссылка, которую пользователь захотел преобразовать в короткую версию
    * *created_at* - дата и время создание укороченной ссылки
    * *expires_at* - время сущестовоания ссылки (после него укороченная и оригинальная ссылка удаляются из БД)
    * *user_id* - id пользователя (нужен для првоерки прав работы с ссылкой (может ли он ее изменять/удалять или нет))
* **links_stats** - хранение статистики использование ссылок
    * *short_link* - укороченная часть ссылки
    * *access_count* - количество раз, когда ссылка использовалась (нужно для добавление в Redis)
    * *last_access* -  дата и время, когда ссылка последний раз использовалась
* **users** - хранение данных о зарегистрировавшихся пользователях
    * *email* - электронная почта пользователя
    * *username* - имя, выбранное пользователем
    * *hashed_password* - значение, которое получается при хэшировании пароля пользователя
    * *is_active* - существование учетной записи пользователя (удалена или нет)

### Redis



